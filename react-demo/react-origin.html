<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>React demo</title>
</head>
<body>
<div id="container"></div>

<!-- 1. 引用react 依赖 -->
<script src="https://unpkg.com/babel-standalone@6.26.0/babel.min.js"></script>
<script src="https://unpkg.com/react@18.1.0/umd/react.development.js"></script>
<script src="https://unpkg.com/react-dom@18.1.0/umd/react-dom.development.js"></script>

<script type="text/babel">
    const { useState, useEffect } = window.React;
    const createElement = window.React.createElement;

    function ChapterX() {
        return (
            <div>this is chapter</div>
        )
    }
    function ButtonX() {
        return (
            <button onClick={ () => alert('click') }>click me!</button>
        )
    }
    function Container() {
        const [ name, setName ] = useState('chris');
        const [ init, setInit ] = useState(true);
        useEffect(() => {
            if (!init) {
                // console.log('init', init);
                setName('chriswong');
                setInit(true);
            }
        }, [init]);
        return (
            <div onClick={ () => setInit(false) }>
                <div>hello {name}</div>
                <ButtonX />
                <ChapterX />
            </div>
        );
    }
    // 3. 生成vdom
    const container = document.querySelector('#container');
    const root = window.ReactDOM.createRoot(container);
    const vdom = createElement(Container);
    // 4. 渲染vdom
    root.render(vdom);
</script>

<script>
    // const createElement = window.React.createElement;
    // 状态管理
    // const { useState, useEffect } = window.React;
    
    // function Button() {
    //     return createElement(
    //         'button',
    //         {
    //             onClick: () => alert('taptap...'),
    //         },
    //         'click me'
    //     )
    // }

    // // 2. 创建 React组件
    // function Container() {
    //     const [ name, setName ] = useState('chris');
    //     const [ init, setInit ] = useState(true);
    //     useEffect(() => {
    //         if (!init) {
    //             // console.log('init', init);
    //             setName('chriswong');
    //             setInit(true);
    //         }
    //     }, [init]);
    //     return createElement(
    //         'h1', // tagName
    //         {
    //             onClick: () => {
    //                 // alert('hello');
    //                 setInit(false);
    //             },
    //         }, // props
    //         `hello ${name}`, // children
    //         createElement(Button),
    //     );
    // }
    // // 3. 生成vdom
    // const container = document.querySelector('#container');
    // const root = window.ReactDOM.createRoot(container);
    // const vdom = createElement(Container);
    // // 4. 渲染vdom
    // root.render(vdom);
</script>

</body>
</html>